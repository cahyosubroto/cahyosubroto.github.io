import{d as S,B as M,o as n,c as x,a as c,f as u,v as r,j as A,C as I,A as K,p as U,a0 as L,h as p,b as v,F as w,g as N,n as E,i as O,t as R,a1 as T,a2 as z}from"./app-Cj0XynKT.js";import{_ as H,p as P,m as X,g as Y}from"./SidebarButton.vue-v2vOZ0Xr.js";import{a as Z,b as q}from"./SidebarListElement.vue-Br-WvAvf.js";import{x as G,a as J}from"./ViewLayoutContent.vue-DekEdvza.js";import{w as $,T as F,c as D,d as Q}from"./LocalPlatformApiReference-BkPNbpLx.js";import{E as W}from"./Form.vue-DshAlcY4.js";import{a as ee}from"./useSidebar-DwVN9jPG.js";import"./plugin-vue_export-helper-DlAUqK2U.js";import"./DataTableInput.vue-CfXCUz3D.js";const oe={class:"flex items-center pointer-events-none"},te=["value"],ae=S({__name:"CookieForm",setup(j){const{activeCookieId:a}=$(),{cookies:d,cookieMutators:b}=F(),l=[{label:"Key",key:"key",placeholder:"Username"},{label:"Value",key:"value",placeholder:"123"},{label:"Domain",key:"domain",placeholder:"scalar.com"},{label:"Path",key:"path",placeholder:"/"},{label:"Expires",key:"expires",placeholder:"Tomorrow"},{label:"Secure",key:"secure",placeholder:"True/False"},{label:"HttpOnly",key:"httpOnly",placeholder:"True/False"}],f=M(()=>d[a.value]||{}),m=(y,i)=>{a.value&&b.edit(a.value,y,i)};return(y,i)=>(n(),x(W,{data:f.value,onUpdate:m,options:l},{title:c(()=>[u("div",oe,[i[1]||(i[1]=u("label",{class:"absolute w-full h-full top-0 left-0 pointer-events-auto opacity-0 cursor-text",for:"cookiename"},null,-1)),u("input",{id:"cookiename",class:"md:pl-1 outline-none border-0 text-c-2 rounded pointer-events-auto relative w-full",placeholder:"Cookie Name",value:f.value.name,onInput:i[0]||(i[0]=g=>m("name",g.target.value))},null,40,te)])]),_:1},8,["data"]))}}),le=S({__name:"CookieRaw",setup(j){const{activeCookieId:a}=$(),{cookies:d}=F();return(b,l)=>(n(),x(P,null,{title:c(()=>l[0]||(l[0]=[u("span",null,"Raw Cookie String",-1)])),default:c(()=>[r(a)&&r(d)[r(a)]?(n(),x(H,{key:0,class:"pl-px pr-2 md:px-2 py-2.5",lineNumbers:"",modelValue:""})):A("",!0)]),_:1}))}}),se={class:"flex-1"},ne=["onClick"],re={class:"before:bg-border before:pointer-events-none before:z-1 before:absolute before:left-[calc(1rem_-_1.5px)] before:top-0 before:h-[calc(100%_+_.5px)] last:before:h-full before:w-[.5px] mb-[.5px] last:mb-0 relative"},ie=["onClick"],ce={class:"before:bg-border before:pointer-events-none before:z-1 before:absolute before:left-[calc(1.75rem_-_1.5px)] before:top-0 before:h-[calc(100%_+_.5px)] last:before:h-full before:w-[.5px] mb-[.5px] last:mb-0 relative"},ye=S({__name:"Cookies",setup(j){const{cookies:a,cookieMutators:d,events:b}=F(),{collapsedSidebarFolders:l,toggleSidebarFolder:f}=ee(),m=I(),y=K(),i=()=>{const o=Object.keys(a).length,e=Q.parse({name:`Cookie ${o}`,value:"",domain:"example.com",path:"/",secure:!1,httpOnly:!1,sameSite:"None"});d.add(e),m.push(e.uid)},g=o=>{d.delete(o);const e=Object.values(a).filter(t=>t.uid!==o);if(e.length>1){const t=e[e.length-1];m.push(t.uid)}else e.length===1&&e[0].uid==="default"&&m.push("default")},C=M(()=>{const o={};return Object.values(a).forEach(e=>{e.domain&&e.path&&(o[e.domain]||(o[e.domain]={}),o[e.domain][e.path]||(o[e.domain][e.path]=[]),o[e.domain][e.path].push(e))}),o}),V=o=>l[o],B=o=>{o!=null&&o.createNew&&y.name==="cookies"&&i()};return U(()=>{const o=Object.keys(C.value),e=Object.entries(C.value).flatMap(([t,s])=>Object.keys(s).map(_=>t+_));o.forEach(t=>{l[t]=!0}),e.forEach(t=>{l[t]=!0}),b.hotKeys.on(B)}),L(()=>b.hotKeys.off(B)),(o,e)=>(n(),x(J,null,{default:c(()=>[p(r(X),{title:"Cookies"},{content:c(()=>[u("div",se,[p(Z,null,{default:c(()=>[(n(!0),v(w,null,N(C.value,(t,s)=>(n(),v("div",{key:s},[u("button",{class:"flex font-medium gap-1.5 items-center px-2 py-1.5 text-left text-sm w-full break-words rounded hover:bg-b-2",type:"button",onClick:_=>r(f)(s)},[p(r(D),{class:E(["text-c-3",{"rotate-90":r(l)[s]}]),icon:"ChevronRight",size:"sm",thickness:"2.5"},null,8,["class"]),O(" "+R(s),1)],8,ne),T(u("div",re,[(n(!0),v(w,null,N(t,(_,h)=>(n(),v("div",{key:h},[u("button",{class:"flex font-medium gap-1.5 items-center pl-5 pr-2 py-1.5 text-left text-sm w-full break-words rounded hover:bg-b-2",type:"button",onClick:k=>r(f)(s+h)},[p(r(D),{class:E(["text-c-3",{"rotate-90":r(l)[s+h]}]),icon:"ChevronRight",size:"sm",thickness:"2.5"},null,8,["class"]),O(" "+R(h),1)],8,ie),T(u("div",ce,[(n(!0),v(w,null,N(_,k=>(n(),x(q,{key:k.uid,class:"cookie text-xs",variable:{name:k.name,uid:k.uid},warningMessage:"Are you sure you want to delete this cookie?",onDelete:ue=>g(k.uid)},null,8,["variable","onDelete"]))),128))],512),[[z,V(s+h)]])]))),128))],512),[[z,V(s)]])]))),128))]),_:1})])]),button:c(()=>[p(Y,{click:i,hotkey:"N"},{title:c(()=>e[0]||(e[0]=[O("Add Cookie")])),_:1})]),_:1}),p(G,{class:"flex-1"},{default:c(()=>[p(ae),p(le)]),_:1})]),_:1}))}});export{ye as default};
