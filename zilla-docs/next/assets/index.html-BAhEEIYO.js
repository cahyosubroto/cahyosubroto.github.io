import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,f as n,o as e}from"./app-CKeM1Wjf.js";const l={};function t(p,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="http-redpanda-sasl-scram" tabindex="-1"><a class="header-anchor" href="#http-redpanda-sasl-scram"><span>http.redpanda.sasl.scram</span></a></h1><p>Listens on http port <code>7114</code> or https port <code>7143</code> and will produce messages to the <code>events</code> topic in <code>SASL/SCRAM</code> enabled Redpanda cluster, synchronously.</p><h2 id="running-locally" tabindex="-1"><a class="header-anchor" href="#running-locally"><span>Running locally</span></a></h2><p>This cookbook runs using Docker compose.</p><h3 id="setup" tabindex="-1"><a class="header-anchor" href="#setup"><span>Setup</span></a></h3><p>The <code>setup.sh</code> script will:</p><ul><li>installs Zilla and Redpanda to the Kubernetes cluster with helm and waits for the pods to start up</li><li>creates the <code>user</code> user in Redpanda</li><li>creates the <code>events</code> topic in Redpanda</li><li>starts port forwarding</li></ul><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">./setup.sh</span></span></code></pre></div><h3 id="verify-behavior" tabindex="-1"><a class="header-anchor" href="#verify-behavior"><span>Verify behavior</span></a></h3><p>Send a <code>POST</code> request with an event body.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">curl</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -v</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">       -X</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &quot;POST&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> http://localhost:7114/events</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">       -H</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">       -d</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &quot;{</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">greeting</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">:</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">Hello, world</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">}&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>output:</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span>...</span></span>
<span class="line"><span>&gt; POST /events HTTP/1.1</span></span>
<span class="line"><span>&gt; Content-Type: application/json</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>&lt; HTTP/1.1 204 No Content</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Verify that the event has been produced to the <code>events</code> topic in Redpanda cluster.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">docker</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> compose</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -p</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> zilla-http-kafka-sync</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> exec</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> kafkacat</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">kafkacat </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">-b</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> redpanda:29092</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -X</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> security.protocol=SASL_PLAINTEXT</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">  -X</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> sasl.mechanisms=SCRAM-SHA-256</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">  -X</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> sasl.username=user</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">  -X</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> sasl.password=redpanda</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">  -t</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> events</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -J</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -u</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> | </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">jq</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>output:</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;topic&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&quot;events&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;partition&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;offset&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;tstype&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&quot;create&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;ts&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1652465273281</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;broker&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1001</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;headers&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: [</span></span>
<span class="line"><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">    &quot;content-type&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">    &quot;application/json&quot;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  ],</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;payload&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&quot;{</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">greeting</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">:</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">Hello, world</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">% Reached end of topic events [</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] at offset </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="teardown" tabindex="-1"><a class="header-anchor" href="#teardown"><span>Teardown</span></a></h3><p>The <code>teardown.sh</code> script stops port forwarding, uninstalls Zilla and Redpanda and deletes the namespace.</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">./teardown.sh</span></span></code></pre></div><p>output:</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span>+ pgrep kubectl</span></span>
<span class="line"><span>99999</span></span>
<span class="line"><span>99998</span></span>
<span class="line"><span>+ killall kubectl</span></span>
<span class="line"><span>+ helm uninstall zilla-http-redpanda-sasl-scram zilla-http-redpanda-sasl-scram-redpanda --namespace zilla-http-redpanda-sasl-scram</span></span>
<span class="line"><span>release &quot;zilla-http-redpanda-sasl-scram&quot; uninstalled</span></span>
<span class="line"><span>release &quot;zilla-http-redpanda-sasl-scram-redpanda&quot; uninstalled</span></span>
<span class="line"><span>+ kubectl delete namespace zilla-http-redpanda-sasl-scram</span></span>
<span class="line"><span>namespace &quot;zilla-http-redpanda-sasl-scram&quot; deleted</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22)]))}const r=i(l,[["render",t],["__file","index.html.vue"]]),k=JSON.parse('{"path":"/cookbooks/http.redpanda.sasl.scram/","title":"http.redpanda.sasl.scram","lang":"en-US","frontmatter":{"description":"http.redpanda.sasl.scram Listens on http port 7114 or https port 7143 and will produce messages to the events topic in SASL/SCRAM enabled Redpanda cluster, synchronously. Runnin...","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://docs.aklivity.io/zilla-docs/next/cookbooks/http.redpanda.sasl.scram/"}],["meta",{"property":"og:site_name","content":"Documentation"}],["meta",{"property":"og:title","content":"http.redpanda.sasl.scram"}],["meta",{"property":"og:description","content":"http.redpanda.sasl.scram Listens on http port 7114 or https port 7143 and will produce messages to the events topic in SASL/SCRAM enabled Redpanda cluster, synchronously. Runnin..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"http.redpanda.sasl.scram\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Running locally","slug":"running-locally","link":"#running-locally","children":[{"level":3,"title":"Setup","slug":"setup","link":"#setup","children":[]},{"level":3,"title":"Verify behavior","slug":"verify-behavior","link":"#verify-behavior","children":[]},{"level":3,"title":"Teardown","slug":"teardown","link":"#teardown","children":[]}]}],"readingTime":{"minutes":0.88,"words":265},"filePathRelative":"cookbooks/http.redpanda.sasl.scram/README.md","autoDesc":true}');export{r as comp,k as data};
