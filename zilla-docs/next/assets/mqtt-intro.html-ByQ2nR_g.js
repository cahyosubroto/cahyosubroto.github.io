import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as g,f as k,d as t,e as l,a as i,b as s,r,o as D}from"./app-BNYstFbe.js";const c={},o={class:"hint-container tip"};function y(m,a){const p=r("CodeTabs"),h=r("RouteLink");return D(),g("div",null,[a[10]||(a[10]=k('<h1 id="mqtt-intro" tabindex="-1"><a class="header-anchor" href="#mqtt-intro"><span>MQTT Intro</span></a></h1><p>Get started with Zilla by deploying our Docker Compose stack. Before proceeding, you should have <a href="https://docs.docker.com/compose/gettingstarted/" target="_blank" rel="noopener noreferrer">Docker Compose</a> installed.</p><h2 id="mqtt-broker-onto-kafka-event-streams" tabindex="-1"><a class="header-anchor" href="#mqtt-broker-onto-kafka-event-streams"><span>MQTT Broker onto Kafka event streams</span></a></h2><p>Running this Zilla sample will create a simple API to create and list items. All of the data will be stored on a Kafka topic.</p><h3 id="setup" tabindex="-1"><a class="header-anchor" href="#setup"><span>Setup</span></a></h3><p>Create these files, <code>zilla.yaml</code> and <code>docker-compose.yaml</code>, in the same directory.</p>',6)),t(p,{id:"18",data:[{id:"zilla.yaml"},{id:"docker-compose.yaml"}],"tab-id":"yaml"},{title0:l(({value:e,isActive:n})=>a[0]||(a[0]=[s("zilla.yaml")])),title1:l(({value:e,isActive:n})=>a[1]||(a[1]=[s("docker-compose.yaml")])),tab0:l(({value:e,isActive:n})=>a[2]||(a[2]=[i("div",{class:"language-yaml line-numbers-mode","data-highlighter":"shiki","data-ext":"yaml","data-title":"yaml",style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4","--shiki-light-bg":"#FFFFFF","--shiki-dark-bg":"#1E1E1E"}},[i("pre",{class:"shiki shiki-themes light-plus dark-plus vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"name"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"MQTT-intro")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"bindings"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#008000","--shiki-dark":"#6A9955"}},"  # Proxy service entrypoint")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  north_tcp_server"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    type"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"tcp")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    kind"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"server")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    options"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      host"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#098658","--shiki-dark":"#B5CEA8"}},"0.0.0.0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      port"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#098658","--shiki-dark":"#B5CEA8"}},"7183")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    exit"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"north_mqtt_server")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#008000","--shiki-dark":"#6A9955"}},"  # MQTT Broker With an exit to Kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  north_mqtt_server"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    type"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"mqtt")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    kind"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"server")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    exit"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"north_mqtt_kafka_mapping")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#008000","--shiki-dark":"#6A9955"}},"  # Proxy MQTT messages to Kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  north_mqtt_kafka_mapping"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    type"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"mqtt-kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    kind"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"proxy")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    options"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      topics"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"        sessions"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"mqtt-sessions")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"        messages"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"mqtt-messages")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"        retained"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"mqtt-retained")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    exit"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"north_kafka_cache_client")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#008000","--shiki-dark":"#6A9955"}},"  # Kafka sync layer")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  north_kafka_cache_client"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    type"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    kind"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"cache_client")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    exit"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"south_kafka_cache_server")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  south_kafka_cache_server"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    type"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    kind"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"cache_server")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    options"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      bootstrap"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"        - "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"mqtt-sessions")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"        - "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"mqtt-retained")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    exit"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"south_kafka_client")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#008000","--shiki-dark":"#6A9955"}},"  # Connect to Kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  south_kafka_client"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    type"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    kind"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"client")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    options"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      servers"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"        - "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"${{env.KAFKA_BOOTSTRAP_SERVER}}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    exit"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"south_kafka_tcp_client")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  south_kafka_tcp_client"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    type"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"tcp")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    kind"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"client")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"telemetry"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  exporters"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    stdout_logs_exporter"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      type"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"stdout")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])),tab1:l(({value:e,isActive:n})=>a[3]||(a[3]=[i("div",{class:"language-yaml line-numbers-mode","data-highlighter":"shiki","data-ext":"yaml","data-title":"yaml",style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4","--shiki-light-bg":"#FFFFFF","--shiki-dark-bg":"#1E1E1E"}},[i("pre",{class:"shiki shiki-themes light-plus dark-plus vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"version"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"'3'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"services"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  zilla"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    image"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"ghcr.io/aklivity/zilla:latest")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    pull_policy"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    depends_on"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"      - "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    ports"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"      - "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"7183:7183")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    environment"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_BOOTSTRAP_SERVER"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"kafka:29092"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    volumes"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"      - "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"./zilla.yaml:/etc/zilla/zilla.yaml")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    command"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"start -v -e")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  kafka"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    image"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"bitnami/kafka:3.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    hostname"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    ports"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"      - "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"9092:9092")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"      - "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"29092:9092")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    environment"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      ALLOW_PLAINTEXT_LISTENER"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"yes"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_NODE_ID"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"1"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_BROKER_ID"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"1"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_CONTROLLER_QUORUM_VOTERS"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"1@127.0.0.1:9093"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"CLIENT:PLAINTEXT,INTERNAL:PLAINTEXT,CONTROLLER:PLAINTEXT"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_CONTROLLER_LISTENER_NAMES"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"CONTROLLER"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_LOG_DIRS"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"/tmp/logs"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_PROCESS_ROLES"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"broker,controller"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_LISTENERS"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"CLIENT://:9092,INTERNAL://:29092,CONTROLLER://:9093"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_INTER_BROKER_LISTENER_NAME"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"INTERNAL"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_ADVERTISED_LISTENERS"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"CLIENT://localhost:9092,INTERNAL://kafka:29092"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"      KAFKA_CFG_AUTO_CREATE_TOPICS_ENABLE"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"true"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"  kafka-init"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    image"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"bitnami/kafka:3.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    command"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"      - "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"/bin/bash"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"      - "),i("span",{style:{"--shiki-light":"#A31515","--shiki-dark":"#CE9178"}},'"-c"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"      -  "),i("span",{style:{"--shiki-light":"#AF00DB","--shiki-dark":"#C586C0"}},"|")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"        /opt/bitnami/kafka/bin/kafka-topics.sh --bootstrap-server kafka:29092 --create --if-not-exists --topic mqtt-messages")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"        /opt/bitnami/kafka/bin/kafka-topics.sh --bootstrap-server kafka:29092 --create --if-not-exists --topic mqtt-sessions --config cleanup.policy=compact")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"        /opt/bitnami/kafka/bin/kafka-topics.sh --bootstrap-server kafka:29092 --create --if-not-exists --topic mqtt-retained --config cleanup.policy=compact")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    depends_on"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},"      - "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#CE9178"}},"kafka")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#800000","--shiki-dark":"#569CD6"}},"    init"),i("span",{style:{"--shiki-light":"#000000","--shiki-dark":"#D4D4D4"}},": "),i("span",{style:{"--shiki-light":"#0000FF","--shiki-dark":"#569CD6"}},"true")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])),_:1}),a[11]||(a[11]=k(`<h3 id="run-zilla-and-kafka" tabindex="-1"><a class="header-anchor" href="#run-zilla-and-kafka"><span>Run Zilla and Kafka</span></a></h3><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">docker-compose</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> up</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> --detach</span></span></code></pre></div><h3 id="send-a-greeting" tabindex="-1"><a class="header-anchor" href="#send-a-greeting"><span>Send a greeting</span></a></h3><p>Using <a href="https://hub.docker.com/_/eclipse-mosquitto" target="_blank" rel="noopener noreferrer">eclipse-mosquitto</a> subscribe to the <code>zilla</code> topic.</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">docker</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> run</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -it</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> --rm</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> eclipse-mosquitto</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">mosquitto_sub </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">--url</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> mqtt://host.docker.internal:7183/zilla</span></span></code></pre></div><p>In a separate session, publish a message on the <code>zilla</code> topic.</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">docker</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> run</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -it</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> --rm</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> eclipse-mosquitto</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">mosquitto_pub </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">--url</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> mqtt://host.docker.internal:7183/zilla</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> --message</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &#39;Hello, world&#39;</span></span></code></pre></div><p>Send messages with the retained flag.</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">docker</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> run</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -it</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> --rm</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> eclipse-mosquitto</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">mosquitto_pub </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">--url</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> mqtt://host.docker.internal:7183/zilla</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> --message</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &#39;Hello, retained&#39;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> --retain</span></span></code></pre></div><p>Then restart the <code>mosquitto_sub</code> above. The latest retained message is delivered, and the other messages are not.</p><h3 id="remove-the-running-containers" tabindex="-1"><a class="header-anchor" href="#remove-the-running-containers"><span>Remove the running containers</span></a></h3><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">docker-compose</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> down</span></span></code></pre></div>`,12)),i("div",o,[a[7]||(a[7]=i("p",{class:"hint-container-title"},"See more of what Zilla can do",-1)),i("p",null,[a[5]||(a[5]=s("Go deeper into this concept with the ")),t(h,{to:"/how-tos/mqtt/mqtt.kafka.broker.html"},{default:l(()=>a[4]||(a[4]=[s("Running an MQTT Kafka broker")])),_:1}),a[6]||(a[6]=s(" example."))])]),a[12]||(a[12]=i("h2",{id:"going-deeper",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#going-deeper"},[i("span",null,"Going Deeper")])],-1)),a[13]||(a[13]=i("p",null,"Try out more MQTT examples:",-1)),i("ul",null,[i("li",null,[t(h,{to:"/how-tos/mqtt/mqtt.kafka.broker.html"},{default:l(()=>a[8]||(a[8]=[s("Running an MQTT Kafka broker")])),_:1})]),a[9]||(a[9]=i("li",null,[i("a",{href:"https://github.com/aklivity/zilla-examples/tree/main/mqtt.kafka.broker.jwt",target:"_blank",rel:"noopener noreferrer"},"mqtt.kafka.broker.jwt")],-1))])])}const b=d(c,[["render",y],["__file","mqtt-intro.html.vue"]]),v=JSON.parse('{"path":"/tutorials/mqtt/mqtt-intro.html","title":"MQTT Intro","lang":"en-US","frontmatter":{"description":"Running these Zilla samples will introduce some MQTT features.","gitInclude":["zilla.yaml","docker-compose.yaml"],"head":[["meta",{"property":"og:url","content":"https://docs.aklivity.io/zilla-docs/next/tutorials/mqtt/mqtt-intro.html"}],["meta",{"property":"og:site_name","content":"Documentation"}],["meta",{"property":"og:title","content":"MQTT Intro"}],["meta",{"property":"og:description","content":"Running these Zilla samples will introduce some MQTT features."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MQTT Intro\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"MQTT Broker onto Kafka event streams","slug":"mqtt-broker-onto-kafka-event-streams","link":"#mqtt-broker-onto-kafka-event-streams","children":[{"level":3,"title":"Setup","slug":"setup","link":"#setup","children":[]},{"level":3,"title":"Run Zilla and Kafka","slug":"run-zilla-and-kafka","link":"#run-zilla-and-kafka","children":[]},{"level":3,"title":"Send a greeting","slug":"send-a-greeting","link":"#send-a-greeting","children":[]},{"level":3,"title":"Remove the running containers","slug":"remove-the-running-containers","link":"#remove-the-running-containers","children":[]}]},{"level":2,"title":"Going Deeper","slug":"going-deeper","link":"#going-deeper","children":[]}],"readingTime":{"minutes":0.82,"words":247},"filePathRelative":"tutorials/mqtt/mqtt-intro.md"}');export{b as comp,v as data};
