import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,f as e,o as t}from"./app-DWA4uJ8g.js";const n={};function l(h,s){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="http-kafka-sasl-scram" tabindex="-1"><a class="header-anchor" href="#http-kafka-sasl-scram"><span>http.kafka.sasl.scram</span></a></h1><p>Listens on http port <code>7114</code> or https port <code>7143</code> and will produce messages to the <code>events</code> topic in <code>SASL/SCRAM</code> enabled Kafka, synchronously.</p><h2 id="running-locally" tabindex="-1"><a class="header-anchor" href="#running-locally"><span>Running locally</span></a></h2><p>This cookbook runs using Docker compose.</p><h3 id="setup" tabindex="-1"><a class="header-anchor" href="#setup"><span>Setup</span></a></h3><p>The <code>setup.sh</code> script will:</p><ul><li>installs Zilla, Kafka and Zookeeper to the Kubernetes cluster with helm and waits for the pods to start up</li><li>creates the <code>events</code> topic in Kafka</li><li>creates SCRAM credential <code>user</code> (the default implementation of SASL/SCRAM in Kafka stores SCRAM credentials in ZooKeeper)</li><li>starts port forwarding</li></ul><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">./setup.sh</span></span></code></pre></div><h3 id="verify-behavior" tabindex="-1"><a class="header-anchor" href="#verify-behavior"><span>Verify behavior</span></a></h3><p>Send a <code>POST</code> request with an event body.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">curl</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -v</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">       -X</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &quot;POST&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> http://localhost:7114/events</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">       -H</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">       -d</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &quot;{</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">greeting</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">:</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">Hello, world</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">}&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>output:</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span>...</span></span>
<span class="line"><span>&gt; POST /events HTTP/1.1</span></span>
<span class="line"><span>&gt; Content-Type: application/json</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>&lt; HTTP/1.1 204 No Content</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Verify that the event has been produced to the <code>events</code> Kafka topic.</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">docker</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> compose</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -p</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> zilla-http-kafka-sync</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> exec</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> kafkacat</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">kafkacat </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">-C</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -b</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> kafka:9092</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -t</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> events</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -J</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -u</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> | </span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">jq</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> .</span></span></code></pre></div><p>output:</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;topic&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&quot;events&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;partition&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;offset&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;tstype&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&quot;create&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;ts&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1652465273281</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;broker&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1001</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;headers&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: [</span></span>
<span class="line"><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">    &quot;content-type&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">    &quot;application/json&quot;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  ],</span></span>
<span class="line"><span style="--shiki-light:#0451A5;--shiki-dark:#9CDCFE;">  &quot;payload&quot;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&quot;{</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">greeting</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">:</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">Hello, world</span><span style="--shiki-light:#EE0000;--shiki-dark:#D7BA7D;">\\&quot;</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">% Reached end of topic events [</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">] at offset </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="teardown" tabindex="-1"><a class="header-anchor" href="#teardown"><span>Teardown</span></a></h3><p>The <code>teardown.sh</code> script stops port forwarding, uninstalls Zilla, Kafka and Zookeeper and deletes the namespace.</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">./teardown.sh</span></span></code></pre></div>`,20)]))}const d=i(n,[["render",l],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/cookbooks/http.kafka.sasl.scram/","title":"http.kafka.sasl.scram","lang":"en-US","frontmatter":{"description":"http.kafka.sasl.scram Listens on http port 7114 or https port 7143 and will produce messages to the events topic in SASL/SCRAM enabled Kafka, synchronously. Running locally This...","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://docs.aklivity.io/zilla-docs/next/cookbooks/http.kafka.sasl.scram/"}],["meta",{"property":"og:site_name","content":"Documentation"}],["meta",{"property":"og:title","content":"http.kafka.sasl.scram"}],["meta",{"property":"og:description","content":"http.kafka.sasl.scram Listens on http port 7114 or https port 7143 and will produce messages to the events topic in SASL/SCRAM enabled Kafka, synchronously. Running locally This..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"http.kafka.sasl.scram\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Running locally","slug":"running-locally","link":"#running-locally","children":[{"level":3,"title":"Setup","slug":"setup","link":"#setup","children":[]},{"level":3,"title":"Verify behavior","slug":"verify-behavior","link":"#verify-behavior","children":[]},{"level":3,"title":"Teardown","slug":"teardown","link":"#teardown","children":[]}]}],"readingTime":{"minutes":0.68,"words":204},"filePathRelative":"cookbooks/http.kafka.sasl.scram/README.md","autoDesc":true}');export{d as comp,r as data};
