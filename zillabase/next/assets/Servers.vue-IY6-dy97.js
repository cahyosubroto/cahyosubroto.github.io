import{m as $,g as j}from"./SidebarButton.vue-opL7-hvU.js";import{a as w,b as F}from"./SidebarListElement.vue-B_H68RFn.js";import{x as L,a as O}from"./ViewLayoutContent.vue-CBF7tT7Z.js";import{w as y,T as C,b as R}from"./LocalPlatformApiReference-B1fvHHN9.js";import{E as S}from"./Form.vue-Ckjzqam8.js";import{d as B,A as T,B as b,o as n,b as k,F as N,h as s,c as _,j as g,C as U,a as u,v as h,f as A,g as E,i as M}from"./app-UdNvEmfz.js";import"./plugin-vue_export-helper-DlAUqK2U.js";import"./DataTableInput.vue-B1IQv_Yl.js";const J={class:"w-full"},P=B({__name:"ServerForm",setup(V){const{activeCollection:t}=y(),{servers:p,serverMutators:d}=C(),f=[{label:"URL",key:"url",placeholder:"https://void.scalar.com/api"},{label:"Label",key:"description",placeholder:"Production"}],v=T(),r=b(()=>{var e,a;return p[t.value&&v.params.server==="default"?(e=t.value)==null?void 0:e.servers[0]:((a=t.value)==null?void 0:a.servers.find(l=>l===v.params.server))??""]}),c=(e,a)=>{t.value&&d.edit(r.value.uid,e,a)},m=(e,a)=>{t.value&&d.edit(r.value.uid,`variables.${e}.value`,a)},o=b(()=>{var e;return Object.entries(((e=r.value)==null?void 0:e.variables)??{}).map(([a,l])=>{var i;return{key:a,label:a,placeholder:(l.default??((i=l==null?void 0:l.enum)==null?void 0:i[0])??"").toString()}})}),x=b(()=>Object.entries(r.value.variables??{}).reduce((e,[a,l])=>{var i;return e[a]=(l.default??((i=l==null?void 0:l.enum)==null?void 0:i[0])??"").toString(),e},{}));return(e,a)=>(n(),k("div",J,[r.value?(n(),k(N,{key:0},[s(S,{data:r.value,onUpdate:c,options:f,title:"Server"},null,8,["data"]),Object.keys(x.value).length?(n(),_(S,{key:0,data:x.value,onUpdate:m,options:o.value,title:"Variables"},null,8,["data","options"])):g("",!0)],64)):g("",!0)]))}}),q={class:"flex-1"},X=B({__name:"Servers",setup(V){const{activeCollection:t}=y(),{servers:p,serverMutators:d}=C(),{push:f}=U(),v=()=>{if(!t.value)return;const r=R.parse({url:"http://localhost"});d.add(r,t.value.uid),f({name:"servers",params:{server:r.uid}})};return(r,c)=>(n(),_(O,null,{default:u(()=>[s(h($),{title:"Servers"},{content:u(()=>[A("div",q,[s(w,null,{default:u(()=>{var m;return[(n(!0),k(N,null,E((m=h(t))==null?void 0:m.servers,o=>(n(),_(F,{key:o,class:"text-xs",variable:{name:h(p)[o].url??"",uid:o}},null,8,["variable"]))),128))]}),_:1})])]),button:u(()=>[s(j,{click:v},{title:u(()=>c[0]||(c[0]=[M("Add Server")])),_:1})]),_:1}),s(L,{class:"flex-1"},{default:u(()=>[s(P)]),_:1})]),_:1}))}});export{X as default};
