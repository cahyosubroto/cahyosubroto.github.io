import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{b as e,k as a,o as t}from"./app-DtoGA-7r.js";const l={};function h(n,i){return t(),e("div",null,i[0]||(i[0]=[a(`<h1 id="embedded-udf" tabindex="-1"><a class="header-anchor" href="#embedded-udf"><span>Embedded UDF</span></a></h1><p>In embedded functions, the function implementation is defined in the SQL function definition. Unlike external UDF, embedded UDF is run internally in Risingwave, so it does not offer as much flexibility as external UDF does. Because of this, embedded UDF are limited for computational purposes only and do not have access to external networks.</p><h2 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h2><p>These steps will walk you through the UDF example in Python.</p><ol><li>Create an empty folder.</li></ol><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">mkdir</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> udf-embedded</span><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  # create a new folder</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">cd</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> udf-embedded</span><span style="--shiki-light:#008000;--shiki-dark:#6A9955;"> # change the current directory</span></span></code></pre></div><ol start="2"><li>Initialize an empty Zillabase project.</li></ol><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">zillabase</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> init</span></span></code></pre></div><ol start="3"><li>Create a new migration file.</li></ol><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">zillabase</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> migration</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> create_function</span></span></code></pre></div><ol start="4"><li>Define the function in the migration file.</li></ol><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">CREATE</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> FUNCTION</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;"> gcd</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(a </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, b </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">int</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">RETURNS</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> int</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> LANGUAGE</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> python </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">AS</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> $$</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">def gcd(a, b):</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    while</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> b != </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        a, b = b, a % b</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> a</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">$$;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>Run the project.</li></ol><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">zillabase</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> start</span></span></code></pre></div><ol start="6"><li>Connect to the database with PSQL.</li></ol><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">psql</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -U</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> root</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -d</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> dev</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -h</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> localhost</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -p</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;"> 4567</span></span></code></pre></div><div class="hint-container info"><p class="hint-container-title">Info</p><p>If you don&#39;t have psql installed, install it with the following commands:</p><p>Debian:</p><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> apt-get</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> -y</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> postgresql-client</span></span></code></pre></div><p>MacOS:</p><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">brew</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> libpq</span></span></code></pre></div></div><ol start="7"><li>Run a query.</li></ol><div class="language-sql" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">select</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> gcd(</span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">12</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#098658;--shiki-dark:#B5CEA8;">4</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span></code></pre></div><ol start="10"><li>Stop the project.</li></ol><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#000000;--shiki-dark:#D4D4D4;--shiki-light-bg:#FFFFFF;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">zillabase</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> stop</span></span></code></pre></div>`,21)]))}const p=s(l,[["render",h],["__file","embedded-udf.html.vue"]]),r=JSON.parse('{"path":"/products/function/embedded-udf.html","title":"Embedded UDF","lang":"en-US","frontmatter":{"description":"Embedded UDF In embedded functions, the function implementation is defined in the SQL function definition. Unlike external UDF, embedded UDF is run internally in Risingwave, so ...","head":[["meta",{"property":"og:url","content":"https://docs.aklivity.io/zillabase/next/products/function/embedded-udf.html"}],["meta",{"property":"og:site_name","content":"Documentation"}],["meta",{"property":"og:title","content":"Embedded UDF"}],["meta",{"property":"og:description","content":"Embedded UDF In embedded functions, the function implementation is defined in the SQL function definition. Unlike external UDF, embedded UDF is run internally in Risingwave, so ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-01-07T04:16:20.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-07T04:16:20.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Embedded UDF\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-01-07T04:16:20.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Example","slug":"example","link":"#example","children":[]}],"git":{"createdTime":1733912729000,"updatedTime":1736223380000,"contributors":[{"name":"cahyosubroto","email":"cahyosubroto30@gmail.com","commits":4}]},"readingTime":{"minutes":0.7,"words":211},"filePathRelative":"products/function/embedded-udf.md","localizedDate":"December 11, 2024","autoDesc":true,"excerpt":"\\n<p>In embedded functions, the function implementation is defined in the SQL function definition. Unlike external UDF, embedded UDF is run internally in Risingwave, so it does not offer as much flexibility as external UDF does. Because of this, embedded UDF are limited for computational purposes only and do not have access to external networks.</p>"}');export{p as comp,r as data};
