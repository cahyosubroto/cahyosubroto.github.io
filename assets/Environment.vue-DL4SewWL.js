import{d as $,m as C,B as Z,w as B,o as v,b as y,j as w,F as V,g as K,f as x,c as k,v as r,z as D,a1 as ee,a3 as le,h as p,n as ae,a4 as R,a as h,C as oe,A as te,p as ne,a0 as ue,i as se,a5 as re,t as ce,x as ie}from"./app-DcQa13eT.js";import{a as T,m as ve,g as de,p as me,_ as pe}from"./SidebarButton.vue-4e9IMP32.js";import{a as fe,b as Ce}from"./SidebarListElement.vue-DQ1BuRWa.js";import{x as be,a as he}from"./ViewLayoutContent.vue-FPMnAKY6.js";import{c as S,p as A,T as xe,E as F,e as ye,n as ke}from"./LocalPlatformApiReference-BX1T-C7u.js";import{m as ge}from"./ScalarTextField.vue-zKOuHoVL.js";import"./plugin-vue_export-helper-DlAUqK2U.js";const Ee=["onClick"],we={key:1,class:"!py-0 flex flex-1 gap-2 items-center rounded"},_e=["placeholder"],I=$({__name:"EnvironmentColors",props:{activeColor:{}},emits:["select"],setup(g){const f=g,c=C(!1),a=C(""),n=C(null),d=[{color:"#8E8E8E"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],m=Z(()=>f.activeColor&&!d.some(e=>e.color===f.activeColor)||a.value?`background-color: ${f.activeColor||a.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),u=()=>{c.value=!c.value,R(()=>{n.value&&n.value.focus()})};return B(a,e=>{e&&!e.startsWith("#")&&(a.value=`#${e}`),c.value=!0}),(e,s)=>(v(),y("div",{class:ae(["flex flex-row gap-1.5 items-center justify-between space-x-1 min-h-10 min-w-[296px] py-1",c.value?"pl-2 pr-1.5":"px-2"])},[c.value?w("",!0):(v(),y(V,{key:0},[(v(),y(V,null,K(d,i=>x("div",{key:i.color,class:"flex h-5 w-5 cursor-pointer items-center justify-center rounded-full",style:D({backgroundColor:i.color}),onClick:_=>e.$emit("select",i.color)},[e.activeColor===i.color&&!a.value?(v(),k(r(S),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):w("",!0)],12,Ee)),64)),s[2]||(s[2]=x("hr",{class:"w-0.5 h-5 border-ghost border-l"},null,-1)),x("label",{class:"cursor-pointer flex flex-row justify-center h-5 w-5 gap-2 items-center rounded-full z-10",style:D(m.value),onClick:u},[!c.value&&(e.activeColor===a.value||e.activeColor&&!d.some(i=>i.color===e.activeColor))?(v(),k(r(S),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):w("",!0)],4)],64)),c.value?(v(),y("div",we,[s[3]||(s[3]=x("span",{class:"absolute border border-dashed h-5 w-5 rounded-full"},null,-1)),x("span",{class:"h-5 w-5 rounded-full z-[1]",style:D(m.value)},null,4),ee(x("input",{ref_key:"customColorInputRef",ref:n,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i),class:"border-transparent flex-1 outline-none w-full text-sm",placeholder:e.activeColor||"#000000",type:"text",onInput:s[1]||(s[1]=i=>e.$emit("select",a.value))},null,40,_e),[[le,a.value]]),x("button",{class:"text-c-3 hover:bg-b-2 p-1.5 rounded-lg",type:"button",onClick:u},[p(r(S),{icon:"Checkmark",size:"xs"})])])):w("",!0)],2))}}),$e={class:"flex flex-col gap-4"},je=$({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(g,{emit:f}){const c=g,a=f,n=C(""),d=m=>{n.value=m};return(m,u)=>(v(),k(r(A),{size:"xxs",state:m.state,title:"Edit Environment Color"},{default:h(()=>[x("div",$e,[p(I,{activeColor:n.value||c.selectedColor,class:"p-1 w-full",onSelect:d},null,8,["activeColor"]),p(T,{onCancel:u[0]||(u[0]=e=>a("cancel")),onSubmit:u[1]||(u[1]=e=>a("submit",n.value))})])]),_:1},8,["state"]))}}),De={class:"flex flex-col gap-3"},Se=$({__name:"EnvironmentModal",props:{state:{}},emits:["cancel","submit"],setup(g,{emit:f}){const c=g,a=f,n=C(""),d=C("#8E8E8E"),m=u=>{d.value=u};return B(()=>c.state.open,u=>{u&&(n.value="",d.value="#8E8E8E")}),(u,e)=>(v(),k(r(A),{size:"xxs",state:u.state,title:"Add Environment"},{default:h(()=>[x("div",De,[p(r(ge),{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),placeholder:"Environment name"},null,8,["modelValue"]),p(I,{activeColor:d.value,class:"p-3 w-full",onSelect:m},null,8,["activeColor"]),p(T,{onCancel:e[1]||(e[1]=s=>a("cancel")),onSubmit:e[2]||(e[2]=s=>a("submit",{name:n.value,color:d.value}))})])]),_:1},8,["state"]))}}),Ve={class:"flex-1"},Be=["value"],Te=$({__name:"Environment",setup(g){const f=oe(),c=te(),{environments:a,environmentMutators:n,events:d}=xe(),m=F(),u=F(),e=C(null),s=C(null),i=C(!1),_=C(null),N=C(""),E=l=>JSON.parse(l),j=l=>JSON.stringify(l,null,2);function z(l){const o=a[Object.keys(a)[0]],t=(o?Object.keys(E(o.value)):[]).reduce((M,Y)=>(M[Y]="",M),{}),b=ye.parse({name:l.name,uid:ke(),color:l.color,value:j(t),isDefault:!1});n.add(b),e.value=b.uid,f.push(e.value),u.hide()}function U(l){Object.values(a).forEach(o=>{const t=E(o.value);l in t||(t[l]="",n.edit(o.uid,"value",j(t)))})}function J(l){Object.values(a).forEach(o=>{const t=E(o.value);l in t&&(delete t[l],n.edit(o.uid,"value",j(t)))})}function L(l){if(e.value){const o=E(l),t=E(a[e.value].value);Object.keys(o).forEach(b=>{b in t||U(b)}),Object.keys(t).forEach(b=>{b in o||J(b)}),n.edit(e.value,"value",l)}}const W=l=>{if(n.delete(l),e.value===l){const o=Object.values(a);if(o.length>0){const t=o[o.length-1];e.value=t.uid,f.push({name:"environment",params:{environment:t.uid}})}else e.value=a.default.uid,f.push({name:"environment",params:{environment:"default"}})}},q=l=>{_.value=l,N.value=a[l].color||"",m.show()},G=l=>{_.value&&(n.edit(_.value,"color",l),m.hide())},H=()=>{const l=f.currentRoute.value.params.environment;l?e.value=l:l==="default"&&(e.value=a.default.uid)},P=()=>{e.value&&!a[e.value].isDefault&&(i.value=!0,R(()=>{var l;(l=s.value)==null||l.focus()}))},Q=l=>{const o=l.target.value;e.value&&!a[e.value].isDefault&&n.edit(e.value,"name",o)},O=l=>{l!=null&&l.createNew&&c.name==="environment"&&z({name:"",color:""})},X=()=>{u.show()};return B(()=>c.params.environment,l=>e.value=l||a.default.uid),ne(()=>{H(),d.hotKeys.on(O)}),ue(()=>d.hotKeys.off(O)),(l,o)=>(v(),k(he,null,{default:h(()=>[p(ve,{title:"Environment"},{content:h(()=>[x("div",Ve,[p(fe,null,{default:h(()=>[(v(!0),y(V,null,K(r(a),t=>(v(),k(Ce,{key:t.uid,class:"text-xs",isCopyable:!1,variable:{name:t.name,uid:t.uid,color:t.color,isDefault:t.isDefault},warningMessage:"Are you sure you want to delete this environment?",onClick:b=>e.value=t.uid,onColorModal:q,onDelete:b=>W(t.uid)},null,8,["variable","onClick","onDelete"]))),128))]),_:1})])]),button:h(()=>[p(de,{click:X,hotkey:"N"},{title:h(()=>o[4]||(o[4]=[se("Add Environment")])),_:1})]),_:1}),p(be,{class:"flex-1"},{default:h(()=>[p(me,null,re({default:h(()=>[e.value?(v(),k(pe,{key:0,class:"pl-px pr-2 md:px-4 py-2",isCopyable:"",language:"json",lineNumbers:"",lint:"",modelValue:r(a)[e.value].value,"onUpdate:modelValue":L},null,8,["modelValue"])):w("",!0)]),_:2},[e.value?{name:"title",fn:h(()=>[!i.value||r(a)[e.value].isDefault?(v(),y("span",{key:0,onDblclick:P},ce(r(a)[e.value].name),33)):(v(),y("input",{key:1,ref_key:"nameInputRef",ref:s,class:"ring-1 ring-offset-4 ring-b-outline rounded",spellcheck:"false",type:"text",value:r(a)[e.value].name,onBlur:o[0]||(o[0]=t=>i.value=!1),onInput:Q,onKeyup:o[1]||(o[1]=ie(t=>i.value=!1,["enter"]))},null,40,Be))]),key:"0"}:void 0]),1024)]),_:1}),p(je,{selectedColor:N.value,state:r(m),onCancel:o[2]||(o[2]=t=>r(m).hide()),onSubmit:G},null,8,["selectedColor","state"]),p(Se,{state:r(u),onCancel:o[3]||(o[3]=t=>r(u).hide()),onSubmit:z},null,8,["state"])]),_:1}))}});export{Te as default};
