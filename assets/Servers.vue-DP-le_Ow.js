import{e as $,g as L}from"./SidebarButton.vue-CXJBeWAq.js";import{a as R,b as j}from"./SidebarListElement.vue-BGXeLeY4.js";import{x as w,a as O}from"./ViewLayoutContent.vue-D6iJj_zr.js";import{Q as y,R as C,am as U}from"./LocalPlatformApiReference-CtcPkllk.js";import{E as S}from"./Form.vue-B78pPcgl.js";import{f as B,aQ as E,l as b,o as u,c as h,a2 as N,a as o,ab as _,b as g,g as F,ac as s,L as k,e as M,aa as Q,af as T}from"./app-huav7LLB.js";import"./plugin-vue_export-helper-DlAUqK2U.js";import"./DataTableInput.vue-HsrIaPMm.js";const A={class:"w-full"},J=B({__name:"ServerForm",setup(V){const{activeCollection:l}=y(),{servers:p,serverMutators:i}=C(),f=[{label:"URL",key:"url",placeholder:"https://void.scalar.com/api"},{label:"Label",key:"description",placeholder:"Production"}],d=E(),r=b(()=>{var e,a;return p[l.value&&d.params.server==="default"?(e=l.value)==null?void 0:e.servers[0]:((a=l.value)==null?void 0:a.servers.find(t=>t===d.params.server))??""]}),c=(e,a)=>{l.value&&i.edit(r.value.uid,e,a)},m=(e,a)=>{l.value&&i.edit(r.value.uid,`variables.${e}.value`,a)},n=b(()=>{var e;return Object.entries(((e=r.value)==null?void 0:e.variables)??{}).map(([a,t])=>{var v;return{key:a,label:a,placeholder:(t.default??((v=t==null?void 0:t.enum)==null?void 0:v[0])??"").toString()}})}),x=b(()=>Object.entries(r.value.variables??{}).reduce((e,[a,t])=>{var v;return e[a]=(t.default??((v=t==null?void 0:t.enum)==null?void 0:v[0])??"").toString(),e},{}));return(e,a)=>(u(),h("div",A,[r.value?(u(),h(N,{key:0},[o(S,{data:r.value,onUpdate:c,options:f,title:"Server"},null,8,["data"]),Object.keys(x.value).length?(u(),_(S,{key:0,data:x.value,onUpdate:m,options:n.value,title:"Variables"},null,8,["data","options"])):g("",!0)],64)):g("",!0)]))}}),P={class:"flex-1"},X=B({__name:"Servers",setup(V){const{activeCollection:l}=y(),{servers:p,serverMutators:i}=C(),{push:f}=F(),d=()=>{if(!l.value)return;const r=U.parse({url:"http://localhost"});i.add(r,l.value.uid),f({name:"servers",params:{server:r.uid}})};return(r,c)=>(u(),_(O,null,{default:s(()=>[o(k($),{title:"Servers"},{content:s(()=>[M("div",P,[o(R,null,{default:s(()=>{var m;return[(u(!0),h(N,null,Q((m=k(l))==null?void 0:m.servers,n=>(u(),_(j,{key:n,class:"text-xs",variable:{name:k(p)[n].url??"",uid:n}},null,8,["variable"]))),128))]}),_:1})])]),button:s(()=>[o(L,{click:d},{title:s(()=>c[0]||(c[0]=[T("Add Server")])),_:1})]),_:1}),o(w,{class:"flex-1"},{default:s(()=>[o(J)]),_:1})]),_:1}))}});export{X as default};
