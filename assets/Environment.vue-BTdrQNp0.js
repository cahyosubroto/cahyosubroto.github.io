import{f as D,k as b,l as Y,w as N,o as v,c as k,b as w,a2 as V,aa as F,e as y,ab as x,L as r,ad as j,aw as ee,aM as le,a as p,a6 as ae,Z as K,ac as h,g as oe,aQ as te,A as ne,O as se,af as ue,ay as re,ag as ce,aN as ie}from"./app-BIZKf4YD.js";import{a as A,e as ve,g as de,p as me,_ as pe}from"./SidebarButton.vue-BW5qvwdz.js";import{a as fe,b as be}from"./SidebarListElement.vue-hSxMvUod.js";import{x as Ce,a as he}from"./ViewLayoutContent.vue-DwRaa1fy.js";import{D as S,_ as I,R as ye,a9 as R,bZ as ke,G as xe}from"./LocalPlatformApiReference-Dd8pMyOB.js";import{m as ge}from"./ScalarTextField.vue-GUqHi8oh.js";import"./plugin-vue_export-helper-DlAUqK2U.js";const Ee=["onClick"],we={key:1,class:"!py-0 flex flex-1 gap-2 items-center rounded"},_e=["placeholder"],T=D({__name:"EnvironmentColors",props:{activeColor:{}},emits:["select"],setup(g){const f=g,c=b(!1),a=b(""),n=b(null),d=[{color:"#8E8E8E"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],m=Y(()=>f.activeColor&&!d.some(e=>e.color===f.activeColor)||a.value?`background-color: ${f.activeColor||a.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),s=()=>{c.value=!c.value,K(()=>{n.value&&n.value.focus()})};return N(a,e=>{e&&!e.startsWith("#")&&(a.value=`#${e}`),c.value=!0}),(e,u)=>(v(),k("div",{class:ae(["flex flex-row gap-1.5 items-center justify-between space-x-1 min-h-10 min-w-[296px] py-1",c.value?"pl-2 pr-1.5":"px-2"])},[c.value?w("",!0):(v(),k(V,{key:0},[(v(),k(V,null,F(d,i=>y("div",{key:i.color,class:"flex h-5 w-5 cursor-pointer items-center justify-center rounded-full",style:j({backgroundColor:i.color}),onClick:_=>e.$emit("select",i.color)},[e.activeColor===i.color&&!a.value?(v(),x(r(S),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):w("",!0)],12,Ee)),64)),u[2]||(u[2]=y("hr",{class:"w-0.5 h-5 border-ghost border-l"},null,-1)),y("label",{class:"cursor-pointer flex flex-row justify-center h-5 w-5 gap-2 items-center rounded-full z-10",style:j(m.value),onClick:s},[!c.value&&(e.activeColor===a.value||e.activeColor&&!d.some(i=>i.color===e.activeColor))?(v(),x(r(S),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):w("",!0)],4)],64)),c.value?(v(),k("div",we,[u[3]||(u[3]=y("span",{class:"absolute border border-dashed h-5 w-5 rounded-full"},null,-1)),y("span",{class:"h-5 w-5 rounded-full z-[1]",style:j(m.value)},null,4),ee(y("input",{ref_key:"customColorInputRef",ref:n,"onUpdate:modelValue":u[0]||(u[0]=i=>a.value=i),class:"border-transparent flex-1 outline-none w-full text-sm",placeholder:e.activeColor||"#000000",type:"text",onInput:u[1]||(u[1]=i=>e.$emit("select",a.value))},null,40,_e),[[le,a.value]]),y("button",{class:"text-c-3 hover:bg-b-2 p-1.5 rounded-lg",type:"button",onClick:s},[p(r(S),{icon:"Checkmark",size:"xs"})])])):w("",!0)],2))}}),De={class:"flex flex-col gap-4"},$e=D({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(g,{emit:f}){const c=g,a=f,n=b(""),d=m=>{n.value=m};return(m,s)=>(v(),x(r(I),{size:"xxs",state:m.state,title:"Edit Environment Color"},{default:h(()=>[y("div",De,[p(T,{activeColor:n.value||c.selectedColor,class:"p-1 w-full",onSelect:d},null,8,["activeColor"]),p(A,{onCancel:s[0]||(s[0]=e=>a("cancel")),onSubmit:s[1]||(s[1]=e=>a("submit",n.value))})])]),_:1},8,["state"]))}}),je={class:"flex flex-col gap-3"},Se=D({__name:"EnvironmentModal",props:{state:{}},emits:["cancel","submit"],setup(g,{emit:f}){const c=g,a=f,n=b(""),d=b("#8E8E8E"),m=s=>{d.value=s};return N(()=>c.state.open,s=>{s&&(n.value="",d.value="#8E8E8E")}),(s,e)=>(v(),x(r(I),{size:"xxs",state:s.state,title:"Add Environment"},{default:h(()=>[y("div",je,[p(r(ge),{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value=u),placeholder:"Environment name"},null,8,["modelValue"]),p(T,{activeColor:d.value,class:"p-3 w-full",onSelect:m},null,8,["activeColor"]),p(A,{onCancel:e[1]||(e[1]=u=>a("cancel")),onSubmit:e[2]||(e[2]=u=>a("submit",{name:n.value,color:d.value}))})])]),_:1},8,["state"]))}}),Ve={class:"flex-1"},Ne=["value"],Ae=D({__name:"Environment",setup(g){const f=oe(),c=te(),{environments:a,environmentMutators:n,events:d}=ye(),m=R(),s=R(),e=b(null),u=b(null),i=b(!1),_=b(null),B=b(""),E=l=>JSON.parse(l),$=l=>JSON.stringify(l,null,2);function O(l){const o=a[Object.keys(a)[0]],t=(o?Object.keys(E(o.value)):[]).reduce((M,X)=>(M[X]="",M),{}),C=ke.parse({name:l.name,uid:xe(),color:l.color,value:$(t),isDefault:!1});n.add(C),e.value=C.uid,f.push(e.value),s.hide()}function U(l){Object.values(a).forEach(o=>{const t=E(o.value);l in t||(t[l]="",n.edit(o.uid,"value",$(t)))})}function L(l){Object.values(a).forEach(o=>{const t=E(o.value);l in t&&(delete t[l],n.edit(o.uid,"value",$(t)))})}function J(l){if(e.value){const o=E(l),t=E(a[e.value].value);Object.keys(o).forEach(C=>{C in t||U(C)}),Object.keys(t).forEach(C=>{C in o||L(C)}),n.edit(e.value,"value",l)}}const Z=l=>{if(n.delete(l),e.value===l){const o=Object.values(a);if(o.length>0){const t=o[o.length-1];e.value=t.uid,f.push({name:"environment",params:{environment:t.uid}})}else e.value=a.default.uid,f.push({name:"environment",params:{environment:"default"}})}},G=l=>{_.value=l,B.value=a[l].color||"",m.show()},Q=l=>{_.value&&(n.edit(_.value,"color",l),m.hide())},W=()=>{const l=f.currentRoute.value.params.environment;l?e.value=l:l==="default"&&(e.value=a.default.uid)},q=()=>{e.value&&!a[e.value].isDefault&&(i.value=!0,K(()=>{var l;(l=u.value)==null||l.focus()}))},H=l=>{const o=l.target.value;e.value&&!a[e.value].isDefault&&n.edit(e.value,"name",o)},z=l=>{l!=null&&l.createNew&&c.name==="environment"&&O({name:"",color:""})},P=()=>{s.show()};return N(()=>c.params.environment,l=>e.value=l||a.default.uid),ne(()=>{W(),d.hotKeys.on(z)}),se(()=>d.hotKeys.off(z)),(l,o)=>(v(),x(he,null,{default:h(()=>[p(ve,{title:"Environment"},{content:h(()=>[y("div",Ve,[p(fe,null,{default:h(()=>[(v(!0),k(V,null,F(r(a),t=>(v(),x(be,{key:t.uid,class:"text-xs",isCopyable:!1,variable:{name:t.name,uid:t.uid,color:t.color,isDefault:t.isDefault},warningMessage:"Are you sure you want to delete this environment?",onClick:C=>e.value=t.uid,onColorModal:G,onDelete:C=>Z(t.uid)},null,8,["variable","onClick","onDelete"]))),128))]),_:1})])]),button:h(()=>[p(de,{click:P,hotkey:"N"},{title:h(()=>o[4]||(o[4]=[ue("Add Environment")])),_:1})]),_:1}),p(Ce,{class:"flex-1"},{default:h(()=>[p(me,null,re({default:h(()=>[e.value?(v(),x(pe,{key:0,class:"pl-px pr-2 md:px-4 py-2",isCopyable:"",language:"json",lineNumbers:"",lint:"",modelValue:r(a)[e.value].value,"onUpdate:modelValue":J},null,8,["modelValue"])):w("",!0)]),_:2},[e.value?{name:"title",fn:h(()=>[!i.value||r(a)[e.value].isDefault?(v(),k("span",{key:0,onDblclick:q},ce(r(a)[e.value].name),33)):(v(),k("input",{key:1,ref_key:"nameInputRef",ref:u,class:"ring-1 ring-offset-4 ring-b-outline rounded",spellcheck:"false",type:"text",value:r(a)[e.value].name,onBlur:o[0]||(o[0]=t=>i.value=!1),onInput:H,onKeyup:o[1]||(o[1]=ie(t=>i.value=!1,["enter"]))},null,40,Ne))]),key:"0"}:void 0]),1024)]),_:1}),p($e,{selectedColor:B.value,state:r(m),onCancel:o[2]||(o[2]=t=>r(m).hide()),onSubmit:Q},null,8,["selectedColor","state"]),p(Se,{state:r(s),onCancel:o[3]||(o[3]=t=>r(s).hide()),onSubmit:O},null,8,["state"])]),_:1}))}});export{Ae as default};
